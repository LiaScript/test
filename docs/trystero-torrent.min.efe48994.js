!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("E0fFs",(function(n,r){var t,a,u,o;t=n.exports,a="joinRoom",u=function(){return Se},Object.defineProperty(t,a,{get:u,set:o,enumerable:!0,configurable:!0});var c,i,s,l,f,d,p,v,y,h,m,g,b,w,_,k,P,T,A,S,E=e("hnmIs"),D=e("bgoEC"),L=e("7j4mF"),I=e("5ENmm"),C=e("6Wo7Q"),U=e("rJmE6"),j=e("32Euv"),O=Math.floor,H=Math.random,R="Trystero",J=function(e,n){return Array(e).fill().map(n)},M=function(e){return J(e,(function(){return"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz"[O(62*H())]})).join("")},x=M(20),q=Promise.all.bind(Promise),B="undefined"!=typeof window,N=Object.entries,F=Object.fromEntries,G=Object.keys,W=function(){},z=function(e){return Error("".concat(R,": ").concat(e))},K=new TextEncoder,Q=new TextDecoder,V=function(e){return K.encode(e)},$=function(e){return Q.decode(e)},X=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.join("@")},Y=JSON.stringify,Z=JSON.parse,ee={},ne="AES-GCM",re={},te=(A=(0,E.default)((function(e){var n,r,t;return(0,j.__generator)(this,(function(a){switch(a.label){case 0:return(n=re[e])?[3,2]:(r=Array.from,t=Uint8Array.bind,[4,crypto.subtle.digest("SHA-1",V(e))]);case 1:n=re[e]=r.apply(Array,[new(t.apply(Uint8Array,[void 0,a.sent()]))]).map((function(e){return e.toString(36)})).join(""),a.label=2;case 2:return[2,n]}}))})),function(e){return A.apply(this,arguments)}),ae=function(){var e=(0,E.default)((function(e,n){var r,t,a,u,o,c;return(0,j.__generator)(this,(function(i){switch(i.label){case 0:return r=crypto.getRandomValues(new Uint8Array(16)),a=r.join(",")+"$",o=(u=crypto.subtle).encrypt,c=[{name:ne,iv:r}],[4,e];case 1:return[4,o.apply(u,c.concat([i.sent(),V(n)]))];case 2:return[2,a+(t=i.sent(),btoa(String.fromCharCode.apply(null,new Uint8Array(t))))]}}))}));return function(n,r){return e.apply(this,arguments)}}(),ue=function(){var e=(0,E.default)((function(e,n){var r,t,a,u,o,c;return(0,j.__generator)(this,(function(i){switch(i.label){case 0:return r=(0,I.default)(n.split("$"),2),t=r[0],a=r[1],o=(u=crypto.subtle).decrypt,c=[{name:ne,iv:new Uint8Array(t.split(","))}],[4,e];case 1:return[4,o.apply(u,c.concat([i.sent(),function(e){var n=atob(e);return new Uint8Array(n.length).map((function(e,r){return n.charCodeAt(r)})).buffer}(a)]))];case 2:return[2,$.apply(void 0,[i.sent()])]}}))}));return function(n,r){return e.apply(this,arguments)}}(),oe="icegatheringstatechange",ce="offer",ie=function(e,n){var r=n.rtcConfig,t=n.rtcPolyfill,a=n.turnConfig,u=new(t||RTCPeerConnection)((0,D.default)({iceServers:se.concat(a||[])},r)),o={},c=!1,i=!1,s=null,l=function(e){e.binaryType="arraybuffer",e.bufferedAmountLowThreshold=65535,e.onmessage=function(e){var n;return null===(n=o.data)||void 0===n?void 0:n.call(o,e.data)},e.onopen=function(){var e;return null===(e=o.connect)||void 0===e?void 0:e.call(o)},e.onclose=function(){var e;return null===(e=o.close)||void 0===e?void 0:e.call(o)},e.onerror=function(e){var n;return null===(n=o.error)||void 0===n?void 0:n.call(o,e)}},f=function(e){return Promise.race([new Promise((function(n){var r=function(){"complete"===e.iceGatheringState&&(e.removeEventListener(oe,r),n())};e.addEventListener(oe,r),r()})),new Promise((function(e){return setTimeout(e,5e3)}))]).then((function(){return{type:e.localDescription.type,sdp:e.localDescription.sdp.replace(/a=ice-options:trickle\s\n/g,"")}}))};return e?(s=u.createDataChannel("data"),l(s)):u.ondatachannel=function(e){var n=e.channel;s=n,l(n)},u.onnegotiationneeded=(0,E.default)((function(){var e,n,r,t;return(0,j.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),c=!0,[4,u.setLocalDescription()];case 1:return a.sent(),[4,f(u)];case 2:return n=a.sent(),null===(e=o.signal)||void 0===e||e.call(o,n),[3,5];case 3:return r=a.sent(),null===(t=o.error)||void 0===t||t.call(o,r),[3,5];case 4:return c=!1,[7];case 5:return[2]}}))})),u.onconnectionstatechange=function(){var e;["disconnected","failed","closed"].includes(u.connectionState)&&(null===(e=o.close)||void 0===e||e.call(o))},u.ontrack=function(e){var n,r;null===(n=o.track)||void 0===n||n.call(o,e.track,e.streams[0]),null===(r=o.stream)||void 0===r||r.call(o,e.streams[0])},u.onremovestream=function(e){var n;return null===(n=o.stream)||void 0===n?void 0:n.call(o,e.stream)},e&&(u.canTrickleIceCandidates||u.onnegotiationneeded()),{created:Date.now(),connection:u,get channel(){return s},get isDead(){return"closed"===u.connectionState},signal:function(n){return(0,E.default)((function(){var r,t,a,l,d;return(0,j.__generator)(this,(function(p){switch(p.label){case 0:if("open"===(null==s?void 0:s.readyState)&&!(null===(r=n.sdp)||void 0===r?void 0:r.includes("a=rtpmap")))return[3,14];p.label=1;case 1:return p.trys.push([1,13,,14]),n.type!==ce?[3,8]:c||"stable"!==u.signalingState&&!i?e?[2]:[4,q([u.setLocalDescription({type:"rollback"}),u.setRemoteDescription(n)])]:[3,3];case 2:return p.sent(),[3,5];case 3:return[4,u.setRemoteDescription(n)];case 4:p.sent(),p.label=5;case 5:return[4,u.setLocalDescription()];case 6:return p.sent(),[4,f(u)];case 7:return a=p.sent(),[2,(null===(t=o.signal)||void 0===t||t.call(o,a),a)];case 8:if("answer"!==n.type)return[3,12];i=!0,p.label=9;case 9:return p.trys.push([9,,11,12]),[4,u.setRemoteDescription(n)];case 10:return p.sent(),[3,12];case 11:return i=!1,[7];case 12:return[3,14];case 13:return l=p.sent(),null===(d=o.error)||void 0===d||d.call(o,l),[3,14];case 14:return[2]}}))}))()},sendData:function(e){return s.send(e)},destroy:function(){null==s||s.close(),u.close(),c=!1,i=!1},setHandlers:function(e){return Object.assign(o,e)},offerPromise:e?new Promise((function(e){return o.signal=function(n){n.type===ce&&e(n)}})):Promise.resolve(),addStream:function(e){return e.getTracks().forEach((function(n){return u.addTrack(n,e)}))},removeStream:function(e){return u.getSenders().filter((function(n){return e.getTracks().includes(n.track)})).forEach((function(e){return u.removeTrack(e)}))},addTrack:function(e,n){return u.addTrack(e,n)},removeTrack:function(e){var n=u.getSenders().find((function(n){return n.track===e}));n&&u.removeTrack(n)},replaceTrack:function(e,n){var r=u.getSenders().find((function(n){return n.track===e}));if(r)return r.replaceTrack(n)}}},se=(0,C.default)(J(3,(function(e,n){return"stun:stun".concat(n||"",".l.google.com:19302")}))).concat(["stun:stun.cloudflare.com:3478"]).map((function(e){return{urls:e}})),le=Object.getPrototypeOf(Uint8Array),fe=16369,de=255,pe="bufferedamountlow",ve=function(e){return"@_"+e},ye={},he={},me={},ge={},be={},we={},_e={},ke={},Pe=function(){var e=(0,E.default)((function(e){var n;return(0,j.__generator)(this,(function(r){switch(r.label){case 0:return he[e]?[2,he[e]]:[4,te(e)];case 1:return n=r.sent().slice(0,20),[2,(he[e]=n,me[n]=e,n)]}}))}));return function(n){return e.apply(this,arguments)}}(),Te=function(){var e=(0,E.default)((function(e,n,r){var t,a;return(0,j.__generator)(this,(function(u){switch(u.label){case 0:return t=e.send,a={action:"announce"},[4,Pe(n)];case 1:return[2,t.apply(e,[Y.apply(void 0,[D.default.apply(void 0,[(a.info_hash=u.sent(),a.peer_id=x,a),r])])])]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),Ae=function(e,n,r){return console.warn("".concat(R,": torrent tracker ").concat(r?"failure":"warning"," from ").concat(e," - ").concat(n))},Se=function(e){var n,r,t,a=e.init,u=e.subscribe,o=e.announce,b={},w=!1;return function(e,_,k){var P,T,A=e.appId;if(null===(T=b[A])||void 0===T?void 0:T[_])return b[A][_];var S={},O={},H=X(R,A,_),M=te(H),K=te(X(H,x)),Q=function(){var e=(0,E.default)((function(e,n,r){var t,a,u;return(0,j.__generator)(this,(function(o){switch(o.label){case 0:return a=(t=crypto.subtle).importKey,u=["raw"],[4,crypto.subtle.digest({name:"SHA-256"},V("".concat(e,":").concat(n,":").concat(r)))];case 1:return[2,a.apply(t,u.concat([o.sent(),{name:ne},!1,["encrypt","decrypt"]]))]}}))}));return function(n,r,t){return e.apply(this,arguments)}}()(e.password||"",A,_),ee=function(e){return function(){var n=(0,E.default)((function(n){var r;return(0,j.__generator)(this,(function(t){switch(t.label){case 0:return r={type:n.type},[4,e(Q,n.sdp)];case 1:return[2,(r.sdp=t.sent(),r)]}}))}));return function(e){return n.apply(this,arguments)}}()},re=ee(ue),oe=ee(ae),ce=function(){return ie(!0,e)},se=function(e,n,r){var t;O[n]?O[n]!==e&&e.destroy():(O[n]=e,Pe(e,n),null===(t=S[n])||void 0===t||t.forEach((function(e,n){n!==r&&e.destroy()})),delete S[n])},ye=function(e,n){O[n]===e&&delete O[n]},he=function(e){return(P=r).push.apply(P,(0,C.default)(J(e,ce))),q(r.splice(0,e).map((function(e){return e.offerPromise.then(oe).then((function(n){return{peer:e,offer:n}}))})))},me=function(n,r){return null==k?void 0:k({error:"incorrect password (".concat(e.password,") when decrypting ").concat(r),appId:A,peerId:n,roomId:_})},ge=function(n){return function(){var r=(0,E.default)((function(r,t,a){var u,o,s,l,f,d,p,v,y,h,m,g,b,w,_,k,P,T,A,E,D,L,C,U,R,J;return(0,j.__generator)(this,(function(j){switch(j.label){case 0:return[4,q([M,K])];case 1:if(u=I.default.apply(void 0,[j.sent(),2]),o=u[0],s=u[1],r!==o&&r!==s)return[2];if(l="string"==typeof t?Z(t):t,f=l.peerId,d=l.offer,p=l.answer,v=l.peer,f===x||O[f])return[3,16];if(f&&!d&&!p)return[3,14];if(!d)return[3,8];if((null===(y=S[f])||void 0===y?void 0:y[n])&&x>f)return[2];(h=ie(!1,e)).setHandlers({connect:function(){return se(h,f,n)},close:function(){return ye(h,f)}}),j.label=2;case 2:return j.trys.push([2,4,,5]),[4,re(d)];case 3:return m=j.sent(),[3,5];case 4:return j.sent(),[2,void me(f,"offer")];case 5:return h.isDead?[2]:[4,q([te(X(H,f)),h.signal(m)])];case 6:return g=I.default.apply(void 0,[j.sent(),2]),b=g[0],w=g[1],_=[b],k={peerId:x},[4,oe(w)];case 7:return a.apply(void 0,_.concat([Y.apply(void 0,[(k.answer=j.sent(),k)])])),[3,13];case 8:if(!p)return[3,13];j.label=9;case 9:return j.trys.push([9,11,,12]),[4,re(p)];case 10:return P=j.sent(),[3,12];case 11:return j.sent(),[2,void me(f,"answer")];case 12:v?(v.setHandlers({connect:function(){return se(v,f,n)},close:function(){return ye(v,f)}}),v.signal(P)):(A=null===(T=S[f])||void 0===T?void 0:T[n])&&!A.isDead&&A.signal(P),j.label=13;case 13:return[3,16];case 14:return(null===(E=S[f])||void 0===E?void 0:E[n])?[2]:[4,q([he(1),te(X(H,f))])];case 15:D=I.default.apply(void 0,[j.sent(),2]),L=(0,I.default)(D[0],1),C=L[0],U=C.peer,R=C.offer,J=D[1],(c=S)[i=f]||(c[i]=[]),S[f][n]=U,setTimeout((function(){return function(e,n){var r;if(!O[e]){var t=null===(r=S[e])||void 0===r?void 0:r[n];t&&(delete S[e][n],t.destroy())}}(f,n)}),.9*we[n]),U.setHandlers({connect:function(){return se(U,f,n)},close:function(){return ye(U,f)}}),a(J,Y({peerId:x,offer:R})),j.label=16;case 16:return[2]}}))}));return function(e,n,t){return r.apply(this,arguments)}}()};if(!e)throw z("requires a config map as the first argument");if(!A&&!e.firebaseApp)throw z("config map is missing appId field");if(!_)throw z("roomId argument required");if(!w){var be=a(e);r=J(20,ce),n=Array.isArray(be)?be:[be],w=!0,t=setInterval((function(){return r=r.filter((function(e){var n=Date.now()-e.created<57333;return n||e.destroy(),n}))}),59052.99)}var we=n.map((function(){return 5333})),_e=[],ke=n.map(function(){var e=(0,E.default)((function(e,n){var r;return(0,j.__generator)(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return r=[t.sent()],[4,M];case 2:return r=r.concat(t.sent()),[4,K];case 3:return[2,u.apply(void 0,r.concat([t.sent(),ge(n),he]))]}}))}));return function(n,r){return e.apply(this,arguments)}}());q([M,K]).then((function(e){var r=(0,I.default)(e,2),t=r[0],a=r[1],u=function(){var e=(0,E.default)((function(e,n){var r;return(0,j.__generator)(this,(function(c){switch(c.label){case 0:return[4,o(e,t,a)];case 1:return"number"==typeof(r=c.sent())&&(we[n]=r),_e[n]=setTimeout((function(){return u(e,n)}),we[n]),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}();ke.forEach(function(){var e=(0,E.default)((function(e,r){return(0,j.__generator)(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return t.sent(),[4,n[r]];case 2:return u.apply(void 0,[t.sent(),r]),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}())}));var Pe=W;return(s=b)[l=A]||(s[l]={}),b[A][_]=function(e,n,r){var t={},a={},u={},o={},c={},i={},s={},l={onPeerJoin:W,onPeerLeave:W,onPeerStream:W,onPeerTrack:W},b=function(e,n){return(e?Array.isArray(e)?e:[e]:G(t)).flatMap((function(e){var r=t[e];return r?n(e,r):(console.warn("".concat(R,": no peer with id ").concat(e," found")),[])}))},w=function(e){t[e]&&(delete t[e],delete o[e],delete c[e],l.onPeerLeave(e),n(e))},_=function(e){if(a[e])return u[e];if(!e)throw z("action type argument is required");var n=V(e);if(n.byteLength>12)throw z('action type string "'.concat(e,'" (').concat(n.byteLength,"b) exceeds byte limit (12). Hint: choose a shorter name."));var r=new Uint8Array(12);r.set(n);var o=0;return a[e]={onComplete:W,onProgress:W,setOnComplete:function(n){return a[e]=(0,L.default)((0,D.default)({},a[e]),{onComplete:n})},setOnProgress:function(n){return a[e]=(0,L.default)((0,D.default)({},a[e]),{onProgress:n})},send:function(e,n,a,u){return(0,E.default)((function(){var c,i,s,l,f,d,p,v,y,h,m;return(0,j.__generator)(this,(function(g){switch(g.label){case 0:if(a&&"object"!=typeof a)throw z("action meta argument must be an object");if("undefined"===(c=void 0===e?"undefined":(0,U.default)(e)))throw z("action data cannot be undefined");if(i="string"!==c,s=e instanceof Blob,l=s||e instanceof ArrayBuffer||e instanceof le,a&&!l)throw z("action meta argument can only be used with binary data");return l?(h=Uint8Array.bind,s?[4,e.arrayBuffer()]:[3,2]):[3,4];case 1:return m=g.sent(),[3,3];case 2:m=e,g.label=3;case 3:return y=new(h.apply(Uint8Array,[void 0,m])),[3,5];case 4:y=V(i?Y(e):e),g.label=5;case 5:return f=y,d=a?V(Y(a)):null,p=Math.ceil(f.byteLength/fe)+(a?1:0)||1,v=J(p,(function(e,n){var t=n===p-1,u=a&&0===n,c=new Uint8Array(15+(u?d.byteLength:t?f.byteLength-fe*(p-(a?2:1)):fe));return c.set(r),c.set([o],12),c.set([t|u<<1|l<<2|i<<3],13),c.set([Math.round((n+1)/p*de)],14),c.set(a?u?d:f.subarray((n-1)*fe,n*fe):f.subarray(n*fe,(n+1)*fe),15),c})),[2,(o=o+1&de,q(b(n,function(){var e=(0,E.default)((function(e,n){var r,o,c;return(0,j.__generator)(this,(function(i){switch(i.label){case 0:r=n.channel,o=0,i.label=1;case 1:return o<p?(c=v[o],r.bufferedAmount>r.bufferedAmountLowThreshold?[4,new Promise((function(e){var n=function(){r.removeEventListener(pe,n),e()};r.addEventListener(pe,n)}))]:[3,3]):[3,5];case 2:i.sent(),i.label=3;case 3:if(!t[e])return[3,5];n.sendData(c),o++,null==u||u(c[14]/de,e,a),i.label=4;case 4:return[3,1];case 5:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}())))]}}))}))()}},(f=u)[d=e]||(f[d]=[a[e].send,a[e].setOnComplete,a[e].setOnProgress])},k=function(e,n){var r=new Uint8Array(n),t=$(r.subarray(0,12)).replaceAll("\0",""),u=(0,I.default)(r.subarray(12,13),1)[0],c=(0,I.default)(r.subarray(13,14),1)[0],i=(0,I.default)(r.subarray(14,15),1)[0],s=r.subarray(15),l=!!(1&c),f=!!(2&c),d=!!(4&c),b=!!(8&c);if(a[t]){(p=o)[v=e]||(p[v]={}),(y=o[e])[h=t]||(y[h]={});var w=(m=o[e][t])[g=u]||(m[g]={chunks:[]});if(f?w.meta=Z($(s)):w.chunks.push(s),a[t].onProgress(i/de,e,w.meta),l){var _=new Uint8Array(w.chunks.reduce((function(e,n){return e+n.byteLength}),0));if(w.chunks.reduce((function(e,n){return _.set(n,e),e+n.byteLength}),0),delete o[e][t][u],d)a[t].onComplete(_,e,w.meta);else{var k=$(_);a[t].onComplete(b?Z(k):k,e)}}}else console.warn("".concat(R,": received message with unregistered type (").concat(t,")"))},P=function(){var e=(0,E.default)((function(){return(0,j.__generator)(this,(function(e){switch(e.label){case 0:return[4,ue("")];case 1:return e.sent(),[4,new Promise((function(e){return setTimeout(e,99)}))];case 2:return e.sent(),N(t).forEach((function(e){var n=(0,I.default)(e,2),r=n[0];n[1].destroy(),delete t[r]})),r(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),T=(0,I.default)(_(ve("ping")),2),A=T[0],S=T[1],C=(0,I.default)(_(ve("pong")),2),O=C[0],H=C[1],M=(0,I.default)(_(ve("signal")),2),x=M[0],K=M[1],Q=(0,I.default)(_(ve("stream")),2),X=Q[0],ee=Q[1],ne=(0,I.default)(_(ve("track")),2),re=ne[0],te=ne[1],ae=(0,I.default)(_(ve("leave")),2),ue=ae[0],oe=ae[1];return function(e){Pe=e}((function(e,n){var r;t[n]||(t[n]=e,e.setHandlers({data:function(e){return k(n,e)},stream:function(e){l.onPeerStream(e,n,i[n]),delete i[n]},track:function(e,r){l.onPeerTrack(e,r,n,s[n]),delete s[n]},signal:function(e){return x(e,n)},close:function(){return w(n)},error:function(e){console.error(e),w(n)}}),l.onPeerJoin(n),null===(r=e.drainEarlyData)||void 0===r||r.call(e,(function(e){return k(n,e)})))})),S((function(e,n){return O("",n)})),H((function(e,n){var r;null===(r=c[n])||void 0===r||r.call(c),delete c[n]})),K((function(e,n){var r;return null===(r=t[n])||void 0===r?void 0:r.signal(e)})),ee((function(e,n){return i[n]=e})),te((function(e,n){return s[n]=e})),oe((function(e,n){return w(n)})),B&&addEventListener("beforeunload",P),{makeAction:_,leave:P,ping:function(e){return(0,E.default)((function(){var n;return(0,j.__generator)(this,(function(r){switch(r.label){case 0:if(!e)throw z("ping() must be called with target peer ID");return n=Date.now(),A("",e),[4,new Promise((function(n){return c[e]=n}))];case 1:return[2,(r.sent(),Date.now()-n)]}}))}))()},getPeers:function(){return F(N(t).map((function(e){var n=(0,I.default)(e,2);return[n[0],n[1].connection]})))},addStream:function(e,n,r){return b(n,function(){var n=(0,E.default)((function(n,t){return(0,j.__generator)(this,(function(a){switch(a.label){case 0:return r?[4,X(r,n)]:[3,2];case 1:a.sent(),a.label=2;case 2:return t.addStream(e),[2]}}))}));return function(e,r){return n.apply(this,arguments)}}())},removeStream:function(e,n){return b(n,(function(n,r){return r.removeStream(e)}))},addTrack:function(e,n,r,t){return b(r,function(){var r=(0,E.default)((function(r,a){return(0,j.__generator)(this,(function(u){switch(u.label){case 0:return t?[4,re(t,r)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.addTrack(e,n),[2]}}))}));return function(e,n){return r.apply(this,arguments)}}())},removeTrack:function(e,n){return b(n,(function(n,r){return r.removeTrack(e)}))},replaceTrack:function(e,n,r,t){return b(r,function(){var r=(0,E.default)((function(r,a){return(0,j.__generator)(this,(function(u){switch(u.label){case 0:return t?[4,re(t,r)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.replaceTrack(e,n),[2]}}))}));return function(e,n){return r.apply(this,arguments)}}())},onPeerJoin:function(e){return l.onPeerJoin=e},onPeerLeave:function(e){return l.onPeerLeave=e},onPeerStream:function(e){return l.onPeerStream=e},onPeerTrack:function(e){return l.onPeerTrack=e}}}(0,(function(e){return delete O[e]}),(function(){delete b[A][_],_e.forEach(clearTimeout),ke.forEach(function(){var e=(0,E.default)((function(e){return(0,j.__generator)(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return[2,n.sent()()]}}))}));return function(n){return e.apply(this,arguments)}}()),clearInterval(t)}))}}({init:function(e){return function(e,n,r){return(e.relayUrls||n).slice(0,e.relayUrls?e.relayUrls.length:e.relayRedundancy||3)}(e,Ee).map((function(e){var n=function(e,n){var r={},t=function(){var a=new WebSocket(e);a.onclose=function(){var n;null!==(n=(b=ee)[w=e])&&void 0!==n||(b[w]=3333),setTimeout(t,ee[e]),ee[e]*=2},a.onmessage=function(e){return n(e.data)},r.socket=a,r.url=a.url,r.ready=new Promise((function(n){return a.onopen=function(){n(r),ee[e]=3333}})),r.send=function(e){1===a.readyState&&a.send(e)}};return t(),r}(e,(function(e){var n=Z(e),t=n["failure reason"],a=n["warning message"],u=n.interval,o=me[n.info_hash];if(t)Ae(r,t,!0);else{var c,i;if(a&&Ae(r,a),u&&1e3*u>we[r]&&be[r][o]){var s=Math.min(1e3*u,120333);clearInterval(ge[r][o]),we[r]=s,ge[r][o]=setInterval(be[r][o],s)}_e[n.offer_id]||(n.offer||n.answer)&&(_e[n.offer_id]=!0,null===(i=(c=ke[r])[o])||void 0===i||i.call(c,n))}})),r=n.url;return ye[r]=n,ke[r]={},n.ready}))},subscribe:function(e,n,r,t,a){var u=e.url,o=function(){var r=(0,E.default)((function(){var r;return(0,j.__generator)(this,(function(u){switch(u.label){case 0:return[4,a(10)];case 1:return r=F.apply(void 0,[u.sent().map((function(e){return[M(20),e]}))]),ke[e.url][n]=function(a){if(a.offer)t(n,{offer:a.offer,peerId:a.peer_id},(function(r,t){return Te(e,n,{answer:Z(t).answer,offer_id:a.offer_id,to_peer_id:a.peer_id})}));else if(a.answer){var u=r[a.offer_id];u&&t(n,{answer:a.answer,peerId:a.peer_id,peer:u.peer})}},Te(e,n,{numwant:10,offers:N(r).map((function(e){var n=(0,I.default)(e,2);return{offer_id:n[0],offer:n[1].offer}}))}),[2]}}))}));return function(){return r.apply(this,arguments)}}();return we[u]=33333,(_=be)[k=u]||(_[k]={}),be[u][n]=o,(P=ge)[T=u]||(P[T]={}),ge[u][n]=setInterval(o,we[u]),o(),function(){clearInterval(ge[u][n]),delete ke[u][n],delete be[u][n]}},announce:function(e){return we[e.url]}}),Ee=(S=ye,["tracker.webtorrent.dev","tracker.openwebtorrent.com","tracker.btorrent.xyz","tracker.files.fm:7073/announce"].map((function(e){return"wss://"+e})))}))}();